sudo: required

dist: trusty

language: rust

rust:
  - nightly
  - beta
  - stable

before_script:
  - wget -O - http://apt.llvm.org/llvm-snapshot.gpg.key|sudo apt-key add -
  - echo "deb http://apt.llvm.org/precise/ llvm-toolchain-precise-3.8 main" | sudo tee -a /etc/apt/sources.list
  - sudo apt-get update -qq
  - sudo apt-get install clang-3.8
  - sudo update-alternatives --install /usr/bin/cc cc /usr/bin/clang-3.8 100
  - sudo update-alternatives --install /usr/bin/c++ c++ /usr/bin/clang++-3.8 100
  - git submodule update --init --recursive

script:
  - cargo test
  - cargo run --manifest-path systest/Cargo.toml
